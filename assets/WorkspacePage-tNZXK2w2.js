import{r as _,j as s,R as y}from"./index-Dekm5p9n.js";const W="_block_12gie_12",X="_block__top_12gie_23",F="_block__name_12gie_31",J="_block__btn_12gie_47",O="_block__icon_12gie_64",A="_resizeHandleBottomRight_12gie_74",m={block:W,block__top:X,block__name:F,block__btn:J,block__icon:O,resizeHandleBottomRight:A},E=[{id:1,top:0,left:0,height:100,width:300},{id:2,top:0,left:412,height:100,width:300},{id:3,top:0,left:824,height:100,width:300},{id:4,top:189,left:210,height:100,width:300},{id:5,top:189,left:622,height:100,width:300}],$=_.createContext(void 0),C=()=>{const e=_.useContext($);if(!e)throw new Error("useBlocks must be used within a BlocksProvider");return e},U=({children:e})=>{const l=()=>{const t=localStorage.getItem("blocks");return t?JSON.parse(t):E},[n,p]=_.useState(l()),[c,b]=_.useState(null),[w,v]=_.useState(null),[z,j]=_.useState(null),g=t=>{localStorage.setItem("blocks",JSON.stringify(t))},R=t=>{const r=n.filter(a=>a.id!==t);p(r),g(r)},k=(t,r,a)=>{const d=n.map(u=>u.id===t?{...u,width:r,height:a}:u);p(d),g(d)},o=_.useCallback((t,r,a)=>{const d=n.map(u=>u.id===t?{...u,...r,...a}:u);p(d),g(d)},[n]),S=()=>{p(E),localStorage.setItem("blocks",JSON.stringify(E))},B=(t,r,a,d)=>{t.stopPropagation(),b(r),v({x:t.clientX,y:t.clientY}),j({width:a,height:d})},N=t=>{if(c===null||!w||!z)return;const r=t.clientX-w.x,a=t.clientY-w.y,d=100,u=50,x=Math.max(d,z.width+r),f=Math.max(u,z.height+a);k(c,x,f)},i=()=>{b(null),v(null),j(null)};return _.useEffect(()=>{const t=l();p(t)},[]),s.jsx($.Provider,{value:{blocks:n,setBlocks:p,deleteBlock:R,resizeBlock:k,updateBlockPositionAndSize:o,handleReset:S,startResize:B,onResize:N,endResize:i,resizingId:c},children:e})},Z=(e,l)=>{if(!e.find(c=>c.id===l))return e;const p=Math.max(...e.map(c=>c.zIndex??1));return e.map(c=>c.id===l?{...c,zIndex:p+1}:((c.zIndex??1)>p,c))},q=y.memo(({id:e,top:l,left:n,width:p=300,height:c=100})=>{const b=_.useRef(null),{blocks:w,setBlocks:v,deleteBlock:z,startResize:j,onResize:g,endResize:R,resizingId:k}=C(),o=w.find(i=>i.id===e);_.useEffect(()=>{console.log(`Block ${e} rendered`)}),_.useEffect(()=>{const i=r=>{k===e&&g(r)},t=()=>{k===e&&R()};return document.addEventListener("mousemove",i),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t)}},[k,e,g,R]);const S=()=>{z(e)},B=i=>{if(k===null){if(!b.current||i.target.closest(`.${m.resizeHandleBottomRight}`)||i.target.closest(`.${m.block__btn}`))return;i.preventDefault(),v(x=>{const f=Z(x,e);return localStorage.setItem("blocks",JSON.stringify(f)),f});const r={x:i.clientX-n,y:i.clientY-l},a=10,d=x=>{const f=x.clientX-r.x,P=x.clientY-r.y,D=Math.round(f/a)*a,Y=Math.round(P/a)*a;v(H=>{const M=H.map(I=>I.id===e?{...I,left:D,top:Y}:I);return localStorage.setItem("blocks",JSON.stringify(M)),M})},u=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}},N=i=>{i.stopPropagation(),o&&j(i,e,o.width,o.height)};return s.jsxs("div",{ref:b,onMouseDown:B,className:m.block,style:{top:`${(o==null?void 0:o.top)??l}px`,left:`${(o==null?void 0:o.left)??n}px`,width:`${(o==null?void 0:o.width)??p}px`,height:`${(o==null?void 0:o.height)??c}px`,zIndex:(o==null?void 0:o.zIndex)??1},children:[s.jsxs("div",{className:m.block__top,children:[s.jsxs("h2",{className:m.block__name,children:["Block ",e]}),s.jsx("button",{className:m.block__btn,onClick:S,children:s.jsx("img",{src:"/vite-project/img/close.png",alt:"close",className:m.block__icon})})]}),s.jsx("div",{className:m.resizeHandleBottomRight,onMouseDown:N})]})}),G="_featuresList_1sxjo_12",K="_description_1sxjo_16",L={featuresList:G,description:K},Q=["Move: Drag the blocks across the grid.","Resize: Change the height and width of the blocks.","Z-Index Control: Click on a block to bring it to the front.","Delete: Remove blocks when needed.","Restore Defaults: Click 'Reset' to return the blocks to their original size and positions."],T=()=>s.jsx("ul",{className:L.featuresList,children:Q.map((e,l)=>s.jsx("li",{className:L.description,children:e},l))}),V="_description_r5u3m_18",ee="_title_r5u3m_41",te="_workspace_r5u3m_54",se="_workspace__button_r5u3m_62",oe="_workspace__blocks_r5u3m_96",h={"purple-background":"_purple-background_r5u3m_12","description-wrapper":"_description-wrapper_r5u3m_18",description:V,title:ee,"task-container":"_task-container_r5u3m_46",workspace:te,workspace__button:se,workspace__blocks:oe},ne=()=>{const{blocks:e,handleReset:l}=C();return s.jsxs("main",{children:[s.jsx("section",{className:h["purple-background"],children:s.jsxs("div",{className:h["description-wrapper"],children:[s.jsx("p",{className:h.description,children:"Welcome to the Interactive Workspace! You have five blocks that can be moved and resized using your mouse. Each block is numbered, with an initial size of 100px in height and 300px in width."}),s.jsx("p",{className:`${h.description} ${h.title}`,children:"Features:"}),s.jsx(T,{})]})}),s.jsx("section",{className:h["task-container"],children:s.jsxs("div",{className:h.workspace,children:[s.jsx("button",{className:h.workspace__button,onClick:l,children:"Reset"}),s.jsx("div",{className:h.workspace__blocks,children:e.map(n=>s.jsx(q,{id:n.id,top:n.top,left:n.left,width:n.width,height:n.height},n.id))})]})})]})},ce=y.memo(ne),re=()=>s.jsx(U,{children:s.jsx(ce,{})});export{re as default};

import{a as ne,b as qe,g as Fe,r as x,j as y}from"./index-CmnHNMYO.js";const Je="_main_w5ohz_12",He="_description_w5ohz_33",Ge="_buttons_w5ohz_63",xe="_text_w5ohz_92",C={main:Je,description:He,"task-wrapper":"_task-wrapper_w5ohz_46",buttons:Ge,"table-wrapper":"_table-wrapper_w5ohz_81",text:xe},Be=["Sort the table by clicking on the column headers.","Highlight any row by clicking on it.","Edit any cell by double-clicking on it.","Add a new transaction using the form below the table (all fields are required).","Delete a transaction by selecting the row and pressing the Delete button."];var Q={},p={},Y={},_e;function j(){return _e||(_e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;var S=1,E=1e3*S;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25*E,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3};var v;(function(d){d[d.UNINSTANTIATED=-1]="UNINSTANTIATED",d[d.CONNECTING=0]="CONNECTING",d[d.OPEN=1]="OPEN",d[d.CLOSING=2]="CLOSING",d[d.CLOSED=3]="CLOSED"})(v||(e.ReadyState=v={}));var i=function(){try{return"EventSource"in globalThis}catch{return!1}};e.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",e.isEventSourceSupported=!e.isReactNative&&i()}(Y)),Y}var H={},X={},he;function ae(){return he||(he=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};var S=function(E){if(E&&e.sharedWebSockets.hasOwnProperty(E))delete e.sharedWebSockets[E];else for(var v in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(v)&&delete e.sharedWebSockets[v]};e.resetWebSockets=S}(X)),X}var M={},I={},be;function ce(){if(be)return I;be=1,Object.defineProperty(I,"__esModule",{value:!0}),I.setUpSocketIOPing=I.appendQueryParams=I.parseSocketIOUrl=void 0;var e=j(),S=function(i){if(i){var d=/^https|wss/.test(i),_=i.replace(/^(https?|wss?)(:\/\/)?/,""),h=_.replace(/\/$/,""),s=d?"wss":"ws";return"".concat(s,"://").concat(h).concat(e.SOCKET_IO_PATH)}else if(i===""){var d=/^https/.test(window.location.protocol),s=d?"wss":"ws",l=window.location.port?":".concat(window.location.port):"";return"".concat(s,"://").concat(window.location.hostname).concat(l).concat(e.SOCKET_IO_PATH)}return i};I.parseSocketIOUrl=S;var E=function(i,d){d===void 0&&(d={});var _=/\?([\w]+=[\w]+)/,h=_.test(i),s="".concat(Object.entries(d).reduce(function(l,c){var n=c[0],u=c[1];return l+"".concat(n,"=").concat(u,"&")},"").slice(0,-1));return"".concat(i).concat(h?"&":"?").concat(s)};I.appendQueryParams=E;var v=function(i,d){d===void 0&&(d=e.SOCKET_IO_PING_INTERVAL);var _=function(){return i(e.SOCKET_IO_PING_CODE)};return window.setInterval(_,d)};return I.setUpSocketIOPing=v,I}var V={},Ee;function Ae(){if(Ee)return V;Ee=1,Object.defineProperty(V,"__esModule",{value:!0}),V.heartbeat=E;var e=j();function S(v){return Array.isArray(v)?v.reduce(function(i,d){return i.current>d.current?i:d}).current:v.current}function E(v,i,d){var _=d||{},h=_.interval,s=h===void 0?e.DEFAULT_HEARTBEAT.interval:h,l=_.timeout,c=l===void 0?e.DEFAULT_HEARTBEAT.timeout:l,n=_.message,u=n===void 0?e.DEFAULT_HEARTBEAT.message:n,t=Math.max(100,s/10),r=Date.now(),o=setInterval(function(){var f=Date.now(),a=S(i);if(a+c<=f)console.warn("Heartbeat timed out, closing connection, last message received ".concat(f-a,"ms ago, last ping sent ").concat(f-r,"ms ago")),v.close();else if(a+s<=f&&r+s<=f)try{typeof u=="function"?v.send(u()):v.send(u),r=f}catch(b){console.error("Heartbeat failed, closing connection",b instanceof Error?b.message:b),v.close()}},t);return v.addEventListener("close",function(){clearInterval(o)}),function(){}}return V}var G={},Z={},ye;function ue(){return ye||(ye=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var S={},E=[],v=function(s){return(0,e.hasSubscribers)(s)?Array.from(S[s]):E};e.getSubscribers=v;var i=function(s){var l;return((l=S[s])===null||l===void 0?void 0:l.size)>0};e.hasSubscribers=i;var d=function(s,l){S[s]=S[s]||new Set,S[s].add(l)};e.addSubscriber=d;var _=function(s,l){S[s].delete(l)};e.removeSubscriber=_;var h=function(s){if(s&&S.hasOwnProperty(s))delete S[s];else for(var l in S)S.hasOwnProperty(l)&&delete S[l]};e.resetSubscribers=h}(Z)),Z}var Oe;function oe(){if(Oe)return G;Oe=1,Object.defineProperty(G,"__esModule",{value:!0}),G.assertIsWebSocket=E,G.resetGlobalState=v;var e=ae(),S=ue();function E(i,d){if(!d&&!(i instanceof WebSocket))throw new Error("")}function v(i){(0,S.resetSubscribers)(i),(0,e.resetWebSockets)(i)}return G}var ge;function Ve(){if(ge)return M;ge=1;var e=M&&M.__assign||function(){return e=Object.assign||function(c){for(var n,u=1,t=arguments.length;u<t;u++){n=arguments[u];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(c[r]=n[r])}return c},e.apply(this,arguments)};Object.defineProperty(M,"__esModule",{value:!0}),M.attachListeners=void 0;var S=ce(),E=Ae(),v=j(),i=oe(),d=function(c,n,u,t){c.onmessage=function(r){var o;n.current.onMessage&&n.current.onMessage(r),typeof(t==null?void 0:t.current)=="number"&&(t.current=Date.now()),!(typeof n.current.filter=="function"&&n.current.filter(r)!==!0)&&(n.current.heartbeat&&typeof n.current.heartbeat!="boolean"&&((o=n.current.heartbeat)===null||o===void 0?void 0:o.returnMessage)===r.data||u(r))}},_=function(c,n,u,t,r){c.onopen=function(o){if(n.current.onOpen&&n.current.onOpen(o),t.current=0,u(v.ReadyState.OPEN),n.current.heartbeat&&c instanceof WebSocket){var f=typeof n.current.heartbeat=="boolean"?void 0:n.current.heartbeat;r.current=Date.now(),(0,E.heartbeat)(c,r,f)}}},h=function(c,n,u,t,r){if(v.isEventSourceSupported&&c instanceof EventSource)return function(){};(0,i.assertIsWebSocket)(c,n.current.skipAssert);var o;return c.onclose=function(f){var a;if(n.current.onClose&&n.current.onClose(f),u(v.ReadyState.CLOSED),n.current.shouldReconnect&&n.current.shouldReconnect(f)){var b=(a=n.current.reconnectAttempts)!==null&&a!==void 0?a:v.DEFAULT_RECONNECT_LIMIT;if(r.current<b){var T=typeof n.current.reconnectInterval=="function"?n.current.reconnectInterval(r.current):n.current.reconnectInterval;o=window.setTimeout(function(){r.current++,t()},T??v.DEFAULT_RECONNECT_INTERVAL_MS)}else n.current.onReconnectStop&&n.current.onReconnectStop(b),console.warn("Max reconnect attempts of ".concat(b," exceeded"))}},function(){return o&&window.clearTimeout(o)}},s=function(c,n,u,t,r){var o;return c.onerror=function(f){var a;if(n.current.onError&&n.current.onError(f),v.isEventSourceSupported&&c instanceof EventSource&&(n.current.onClose&&n.current.onClose(e(e({},f),{code:1006,reason:"An error occurred with the EventSource: ".concat(f),wasClean:!1})),u(v.ReadyState.CLOSED),c.close()),n.current.retryOnError)if(r.current<((a=n.current.reconnectAttempts)!==null&&a!==void 0?a:v.DEFAULT_RECONNECT_LIMIT)){var b=typeof n.current.reconnectInterval=="function"?n.current.reconnectInterval(r.current):n.current.reconnectInterval;o=window.setTimeout(function(){r.current++,t()},b??v.DEFAULT_RECONNECT_INTERVAL_MS)}else n.current.onReconnectStop&&n.current.onReconnectStop(n.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(n.current.reconnectAttempts," exceeded"))},function(){return o&&window.clearTimeout(o)}},l=function(c,n,u,t,r,o,f){var a=n.setLastMessage,b=n.setReadyState,T,N,O;return u.current.fromSocketIO&&(T=(0,S.setUpSocketIOPing)(f)),d(c,u,a,o),_(c,u,b,r,o),N=h(c,u,b,t,r),O=s(c,u,b,t,r),function(){b(v.ReadyState.CLOSING),N(),O(),c.close(),T&&clearInterval(T)}};return M.attachListeners=l,M}var R={},Te;function $e(){if(Te)return R;Te=1;var e=R&&R.__assign||function(){return e=Object.assign||function(n){for(var u,t=1,r=arguments.length;t<r;t++){u=arguments[t];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(n[o]=u[o])}return n},e.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.attachSharedListeners=void 0;var S=ae(),E=j(),v=ue(),i=ce(),d=Ae(),_=function(n,u,t){n.onmessage=function(r){(0,v.getSubscribers)(u).forEach(function(o){var f;o.optionsRef.current.onMessage&&o.optionsRef.current.onMessage(r),typeof((f=o==null?void 0:o.lastMessageTime)===null||f===void 0?void 0:f.current)=="number"&&(o.lastMessageTime.current=Date.now()),!(typeof o.optionsRef.current.filter=="function"&&o.optionsRef.current.filter(r)!==!0)&&(t&&typeof t!="boolean"&&(t==null?void 0:t.returnMessage)===r.data||o.setLastMessage(r))})}},h=function(n,u,t){n.onopen=function(r){var o=(0,v.getSubscribers)(u);o.forEach(function(f){f.reconnectCount.current=0,f.optionsRef.current.onOpen&&f.optionsRef.current.onOpen(r),f.setReadyState(E.ReadyState.OPEN),t&&n instanceof WebSocket&&(f.lastMessageTime.current=Date.now())}),t&&n instanceof WebSocket&&(0,d.heartbeat)(n,o.map(function(f){return f.lastMessageTime}),typeof t=="boolean"?void 0:t)}},s=function(n,u){n instanceof WebSocket&&(n.onclose=function(t){(0,v.getSubscribers)(u).forEach(function(r){r.optionsRef.current.onClose&&r.optionsRef.current.onClose(t),r.setReadyState(E.ReadyState.CLOSED)}),delete S.sharedWebSockets[u],(0,v.getSubscribers)(u).forEach(function(r){var o;if(r.optionsRef.current.shouldReconnect&&r.optionsRef.current.shouldReconnect(t)){var f=(o=r.optionsRef.current.reconnectAttempts)!==null&&o!==void 0?o:E.DEFAULT_RECONNECT_LIMIT;if(r.reconnectCount.current<f){var a=typeof r.optionsRef.current.reconnectInterval=="function"?r.optionsRef.current.reconnectInterval(r.reconnectCount.current):r.optionsRef.current.reconnectInterval;setTimeout(function(){r.reconnectCount.current++,r.reconnect.current()},a??E.DEFAULT_RECONNECT_INTERVAL_MS)}else r.optionsRef.current.onReconnectStop&&r.optionsRef.current.onReconnectStop(r.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(f," exceeded"))}})})},l=function(n,u){n.onerror=function(t){(0,v.getSubscribers)(u).forEach(function(r){r.optionsRef.current.onError&&r.optionsRef.current.onError(t),E.isEventSourceSupported&&n instanceof EventSource&&(r.optionsRef.current.onClose&&r.optionsRef.current.onClose(e(e({},t),{code:1006,reason:"An error occurred with the EventSource: ".concat(t),wasClean:!1})),r.setReadyState(E.ReadyState.CLOSED))}),E.isEventSourceSupported&&n instanceof EventSource&&n.close()}},c=function(n,u,t,r){var o;return t.current.fromSocketIO&&(o=(0,i.setUpSocketIOPing)(r)),_(n,u,t.current.heartbeat),s(n,u),h(n,u,t.current.heartbeat),l(n,u),function(){o&&clearInterval(o)}};return R.attachSharedListeners=c,R}var me;function Ke(){if(me)return H;me=1,Object.defineProperty(H,"__esModule",{value:!0}),H.createOrJoinSocket=void 0;var e=ae(),S=j(),E=Ve(),v=$e(),i=ue(),d=function(h,s,l,c,n){return function(){if((0,i.removeSubscriber)(h,s),!(0,i.hasSubscribers)(h)){try{var u=e.sharedWebSockets[h];u instanceof WebSocket&&(u.onclose=function(t){l.current.onClose&&l.current.onClose(t),c(S.ReadyState.CLOSED)}),u.close()}catch{}n&&n(),delete e.sharedWebSockets[h]}}},_=function(h,s,l,c,n,u,t,r,o){if(!S.isEventSourceSupported&&c.current.eventSourceOptions)throw S.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(c.current.share){var f=null;e.sharedWebSockets[s]===void 0?(e.sharedWebSockets[s]=c.current.eventSourceOptions?new EventSource(s,c.current.eventSourceOptions):new WebSocket(s,c.current.protocols),h.current=e.sharedWebSockets[s],l(S.ReadyState.CONNECTING),f=(0,v.attachSharedListeners)(e.sharedWebSockets[s],s,c,o)):(h.current=e.sharedWebSockets[s],l(e.sharedWebSockets[s].readyState));var a={setLastMessage:n,setReadyState:l,optionsRef:c,reconnectCount:t,lastMessageTime:r,reconnect:u};return(0,i.addSubscriber)(s,a),d(s,a,c,l,f)}else{if(h.current=c.current.eventSourceOptions?new EventSource(s,c.current.eventSourceOptions):new WebSocket(s,c.current.protocols),l(S.ReadyState.CONNECTING),!h.current)throw new Error("WebSocket failed to be created");return(0,E.attachListeners)(h.current,{setLastMessage:n,setReadyState:l},c,u.current,t,r,o)}};return H.createOrJoinSocket=_,H}var P={},Ne;function ze(){return Ne||(Ne=1,function(e){var S=P&&P.__awaiter||function(s,l,c,n){function u(t){return t instanceof c?t:new c(function(r){r(t)})}return new(c||(c=Promise))(function(t,r){function o(b){try{a(n.next(b))}catch(T){r(T)}}function f(b){try{a(n.throw(b))}catch(T){r(T)}}function a(b){b.done?t(b.value):u(b.value).then(o,f)}a((n=n.apply(s,l||[])).next())})},E=P&&P.__generator||function(s,l){var c={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},n,u,t,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function o(a){return function(b){return f([a,b])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(c=0)),c;)try{if(n=1,u&&(t=a[0]&2?u.return:a[0]?u.throw||((t=u.return)&&t.call(u),0):u.next)&&!(t=t.call(u,a[1])).done)return t;switch(u=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,u=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(t=c.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){c=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){c.label=a[1];break}if(a[0]===6&&c.label<t[1]){c.label=t[1],t=a;break}if(t&&c.label<t[2]){c.label=t[2],c.ops.push(a);break}t[2]&&c.ops.pop(),c.trys.pop();continue}a=l.call(s,c)}catch(b){a=[6,b],u=0}finally{n=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},v=P&&P.__spreadArray||function(s,l,c){if(c||arguments.length===2)for(var n=0,u=l.length,t;n<u;n++)(t||!(n in l))&&(t||(t=Array.prototype.slice.call(l,0,n)),t[n]=l[n]);return s.concat(t||Array.prototype.slice.call(l))};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var i=ce(),d=j(),_=function(s){return new Promise(function(l){return window.setTimeout(l,s)})},h=function(s,l){for(var c=[],n=2;n<arguments.length;n++)c[n-2]=arguments[n];return S(void 0,v([s,l],c,!0),void 0,function(u,t,r){var o,f,a,b,T,N,O,g;return r===void 0&&(r=0),E(this,function(m){switch(m.label){case 0:if(typeof u!="function")return[3,10];m.label=1;case 1:return m.trys.push([1,3,,9]),[4,u()];case 2:return o=m.sent(),[3,9];case 3:return m.sent(),t.current.retryOnError?(f=(N=t.current.reconnectAttempts)!==null&&N!==void 0?N:d.DEFAULT_RECONNECT_LIMIT,r<f?(a=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(r):t.current.reconnectInterval,[4,_(a??d.DEFAULT_RECONNECT_INTERVAL_MS)]):[3,5]):[3,7];case 4:return m.sent(),[2,(0,e.getUrl)(u,t,r+1)];case 5:return(g=(O=t.current).onReconnectStop)===null||g===void 0||g.call(O,r),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:o=u,m.label=11;case 11:return b=t.current.fromSocketIO?(0,i.parseSocketIOUrl)(o):o,T=t.current.queryParams?(0,i.appendQueryParams)(b,t.current.queryParams):b,[2,T]}})})};e.getUrl=h}(P)),P}var ee={},we;function Qe(){return we||(we=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.websocketWrapper=void 0;var S=function(E,v){return new Proxy(E,{get:function(i,d){var _=i[d];return d==="reconnect"?v:typeof _=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):_},set:function(i,d,_){return/^on/.test(d)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(i[d]=_,!0)}})};e.websocketWrapper=S,e.default=e.websocketWrapper}(ee)),ee}var pe;function se(){if(pe)return p;pe=1;var e=p&&p.__assign||function(){return e=Object.assign||function(u){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&(u[f]=t[f])}return u},e.apply(this,arguments)},S=p&&p.__awaiter||function(u,t,r,o){function f(a){return a instanceof r?a:new r(function(b){b(a)})}return new(r||(r=Promise))(function(a,b){function T(g){try{O(o.next(g))}catch(m){b(m)}}function N(g){try{O(o.throw(g))}catch(m){b(m)}}function O(g){g.done?a(g.value):f(g.value).then(T,N)}O((o=o.apply(u,t||[])).next())})},E=p&&p.__generator||function(u,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,f,a,b=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return b.next=T(0),b.throw=T(1),b.return=T(2),typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function T(O){return function(g){return N([O,g])}}function N(O){if(o)throw new TypeError("Generator is already executing.");for(;b&&(b=0,O[0]&&(r=0)),r;)try{if(o=1,f&&(a=O[0]&2?f.return:O[0]?f.throw||((a=f.return)&&a.call(f),0):f.next)&&!(a=a.call(f,O[1])).done)return a;switch(f=0,a&&(O=[O[0]&2,a.value]),O[0]){case 0:case 1:a=O;break;case 4:return r.label++,{value:O[1],done:!1};case 5:r.label++,f=O[1],O=[0];continue;case 7:O=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(O[0]===6||O[0]===2)){r=0;continue}if(O[0]===3&&(!a||O[1]>a[0]&&O[1]<a[3])){r.label=O[1];break}if(O[0]===6&&r.label<a[1]){r.label=a[1],a=O;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(O);break}a[2]&&r.ops.pop(),r.trys.pop();continue}O=t.call(u,r)}catch(g){O=[6,g],f=0}finally{o=a=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},v=p&&p.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(p,"__esModule",{value:!0}),p.useWebSocket=void 0;var i=ne(),d=qe(),_=j(),h=Ke(),s=ze(),l=v(Qe()),c=oe(),n=function(u,t,r){t===void 0&&(t=_.DEFAULT_OPTIONS),r===void 0&&(r=!0);var o=(0,i.useState)(null),f=o[0],a=o[1],b=(0,i.useState)({}),T=b[0],N=b[1],O=(0,i.useMemo)(function(){if(!t.disableJson&&f)try{return JSON.parse(f.data)}catch{return _.UNPARSABLE_JSON_OBJECT}return null},[f,t.disableJson]),g=(0,i.useRef)(null),m=(0,i.useRef)(null),$=(0,i.useRef)(function(){}),le=(0,i.useRef)(0),Me=(0,i.useRef)(Date.now()),fe=(0,i.useRef)([]),L=(0,i.useRef)(null),D=(0,i.useRef)(t);D.current=t;var K=g.current&&T[g.current]!==void 0?T[g.current]:u!==null&&r===!0?_.ReadyState.CONNECTING:_.ReadyState.UNINSTANTIATED,Re=t.queryParams?JSON.stringify(t.queryParams):null,W=(0,i.useCallback)(function(w,k){var q;if(k===void 0&&(k=!0),_.isEventSourceSupported&&m.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((q=m.current)===null||q===void 0?void 0:q.readyState)===_.ReadyState.OPEN?((0,c.assertIsWebSocket)(m.current,D.current.skipAssert),m.current.send(w)):k&&fe.current.push(w)},[]),Ue=(0,i.useCallback)(function(w,k){k===void 0&&(k=!0),W(JSON.stringify(w),k)},[W]),De=(0,i.useCallback)(function(){return D.current.share!==!0||_.isEventSourceSupported&&m.current instanceof EventSource?m.current:(L.current===null&&m.current&&((0,c.assertIsWebSocket)(m.current,D.current.skipAssert),L.current=(0,l.default)(m.current,$)),L.current)},[]);return(0,i.useEffect)(function(){if(u!==null&&r===!0){var w,k=!1,q=!0,de=function(){return S(void 0,void 0,void 0,function(){var B,F,ve;return E(this,function(Se){switch(Se.label){case 0:return B=g,[4,(0,s.getUrl)(u,D)];case 1:return B.current=Se.sent(),g.current===null?(console.error("Failed to get a valid URL. WebSocket connection aborted."),g.current="ABORTED",(0,d.flushSync)(function(){return N(function(J){return e(e({},J),{ABORTED:_.ReadyState.CLOSED})})}),[2]):(F=function(J){k||(0,d.flushSync)(function(){return a(J)})},ve=function(J){k||(0,d.flushSync)(function(){return N(function(We){var z;return e(e({},We),g.current&&(z={},z[g.current]=J,z))})})},q&&(w=(0,h.createOrJoinSocket)(m,g.current,ve,D,F,$,le,Me,W)),[2])}})})};return $.current=function(){k||(L.current&&(L.current=null),w==null||w(),de())},de(),function(){k=!0,q=!1,L.current&&(L.current=null),w==null||w(),a(null)}}else(u===null||r===!1)&&(le.current=0,N(function(B){var F;return e(e({},B),g.current&&(F={},F[g.current]=_.ReadyState.CLOSED,F))}))},[u,r,Re,W]),(0,i.useEffect)(function(){K===_.ReadyState.OPEN&&fe.current.splice(0).forEach(function(w){W(w)})},[K]),{sendMessage:W,sendJsonMessage:Ue,lastMessage:f,lastJsonMessage:O,readyState:K,getWebSocket:De}};return p.useWebSocket=n,p}var U={},ke;function Ye(){if(ke)return U;ke=1;var e=U&&U.__assign||function(){return e=Object.assign||function(h){for(var s,l=1,c=arguments.length;l<c;l++){s=arguments[l];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(h[n]=s[n])}return h},e.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.useSocketIO=void 0;var S=ne(),E=se(),v=j(),i={type:"empty",payload:null},d=function(h){if(!h||!h.data)return i;var s=h.data.match(/\[.*]/);if(!s)return i;var l=JSON.parse(s);return!Array.isArray(l)||!l[1]?i:{type:l[0],payload:l[1]}},_=function(h,s,l){s===void 0&&(s=v.DEFAULT_OPTIONS),l===void 0&&(l=!0);var c=(0,S.useMemo)(function(){return e(e({},s),{fromSocketIO:!0})},[]),n=(0,E.useWebSocket)(h,c,l),u=n.sendMessage,t=n.sendJsonMessage,r=n.lastMessage,o=n.readyState,f=n.getWebSocket,a=(0,S.useMemo)(function(){return d(r)},[r]);return{sendMessage:u,sendJsonMessage:t,lastMessage:a,lastJsonMessage:a,readyState:o,getWebSocket:f}};return U.useSocketIO=_,U}var A={},Ce;function Xe(){if(Ce)return A;Ce=1;var e=A&&A.__assign||function(){return e=Object.assign||function(_){for(var h,s=1,l=arguments.length;s<l;s++){h=arguments[s];for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(_[c]=h[c])}return _},e.apply(this,arguments)},S=A&&A.__rest||function(_,h){var s={};for(var l in _)Object.prototype.hasOwnProperty.call(_,l)&&h.indexOf(l)<0&&(s[l]=_[l]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(_);c<l.length;c++)h.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(_,l[c])&&(s[l[c]]=_[l[c]]);return s};Object.defineProperty(A,"__esModule",{value:!0}),A.useEventSource=void 0;var E=ne(),v=se(),i=j(),d=function(_,h,s){h===void 0&&(h=i.DEFAULT_EVENT_SOURCE_OPTIONS);var l=h.withCredentials,c=h.events,n=S(h,["withCredentials","events"]);s===void 0&&(s=!0);var u=e(e({},n),{eventSourceOptions:{withCredentials:l}}),t=(0,E.useRef)(i.EMPTY_EVENT_HANDLERS);c&&(t.current=c);var r=(0,v.useWebSocket)(_,u,s),o=r.lastMessage,f=r.readyState,a=r.getWebSocket;return(0,E.useEffect)(function(){o!=null&&o.type&&Object.entries(t.current).forEach(function(b){var T=b[0],N=b[1];T===o.type&&N(o)})},[o]),{lastEvent:o,readyState:f,getEventSource:a}};return A.useEventSource=d,A}var je;function Ze(){return je||(je=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.useEventSource=e.ReadyState=e.useSocketIO=e.default=void 0;var S=se();Object.defineProperty(e,"default",{enumerable:!0,get:function(){return S.useWebSocket}});var E=Ye();Object.defineProperty(e,"useSocketIO",{enumerable:!0,get:function(){return E.useSocketIO}});var v=j();Object.defineProperty(e,"ReadyState",{enumerable:!0,get:function(){return v.ReadyState}});var i=Xe();Object.defineProperty(e,"useEventSource",{enumerable:!0,get:function(){return i.useEventSource}});var d=oe();Object.defineProperty(e,"resetGlobalState",{enumerable:!0,get:function(){return d.resetGlobalState}})}(Q)),Q}var te=Ze();const er=Fe(te),Le=x.createContext(void 0),ie=()=>{const e=x.useContext(Le);if(!e)throw new Error("useTracker must be used within a TrackerProvider");return e},rr=({children:e})=>{const[S,E]=x.useState(0),[v,i]=x.useState([]),{lastJsonMessage:d,readyState:_,sendJsonMessage:h}=er("wss://ws.blockchain.info/inv"),s=1e-8,l=()=>{_==te.ReadyState.OPEN&&h({op:"unconfirmed_sub"})},c=()=>{_==te.ReadyState.OPEN&&h({op:"unconfirmed_unsub"})},n=()=>{i([]),E(0)};return x.useEffect(()=>{if(!d||d.op!="utx")return;const u=d.x.inputs.map(f=>f.prev_out.addr);let t=0;const r=d.x.out.map(f=>(t+=f.value,f.addr)),o=t*s;i(f=>[...f,{from:u,to:r,sum:o}]),E(f=>f+o)},[d]),y.jsx(Le.Provider,{value:{messages:v,onStart:l,onStop:c,onReset:n,totalSum:S},children:e})},tr="_start_ux29t_12",nr="_stop_ux29t_51",ar="_reset_ux29t_90",cr="_disabled_ux29t_129",Ie={start:tr,stop:nr,reset:ar,disabled:cr},re=({text:e,variant:S,onClick:E})=>{const{totalSum:v}=ie(),i=v<=0&&(S==="stop"||S==="reset"),d=`${Ie[S]} ${i?Ie.disabled:""}`;return y.jsx("button",{className:d,onClick:E,disabled:i,children:e})},Pe={"tracker-table-wrapper":"_tracker-table-wrapper_11ggb_12","tracker-table":"_tracker-table_11ggb_12"},ur=()=>{const{messages:e,totalSum:S}=ie();return y.jsx("div",{className:Pe["tracker-table-wrapper"],children:y.jsxs("table",{className:Pe["tracker-table"],children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"From"}),y.jsx("th",{children:"To"}),y.jsx("th",{children:"Sum"})]})}),S<=0?y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{}),y.jsx("td",{}),y.jsx("td",{})]}),y.jsxs("tr",{children:[y.jsx("td",{}),y.jsx("td",{}),y.jsx("td",{})]}),y.jsxs("tr",{children:[y.jsx("td",{}),y.jsx("td",{}),y.jsx("td",{})]})]}):y.jsx("tbody",{children:e.map((E,v)=>y.jsxs("tr",{children:[y.jsx("td",{children:E.from.map((i,d)=>y.jsx("p",{children:i},d))}),y.jsx("td",{children:E.to.map(i=>y.jsx("p",{children:i}))}),y.jsx("td",{children:y.jsxs("p",{children:[E.sum," BTC"]})})]},v))})]})})},or=()=>{const{onStart:e,onStop:S,onReset:E,totalSum:v}=ie();return y.jsxs("main",{className:C.main,children:[y.jsxs("section",{className:C["description-wrapper"],children:[y.jsx("p",{className:C.description,children:"Below is a table that displays a list of cryptocurrency transactions. Each row includes the sender’s address, the receiver’s address, and the transaction amount."}),y.jsx("p",{className:`${C.description} ${C.title}`,children:"You can:"}),y.jsx("ul",{className:C.featuresList,children:Be.map((i,d)=>y.jsx("li",{className:C.description,children:i},d))})]}),y.jsxs("section",{className:C["task-wrapper"],children:[y.jsxs("div",{className:C.buttons,children:[y.jsx(re,{text:"Start",variant:"start",onClick:e}),y.jsx(re,{text:"Stop",variant:"stop",onClick:S}),y.jsx(re,{text:"Reset",variant:"reset",onClick:E})]}),y.jsxs("div",{className:C["table-wrapper"],children:[y.jsxs("div",{className:C.text,style:{visibility:v>0?"visible":"hidden"},children:["Sum = ",v," BTC"]}),y.jsx(ur,{})]})]})]})},ir=()=>y.jsx(rr,{children:y.jsx(or,{})});export{ir as default};
